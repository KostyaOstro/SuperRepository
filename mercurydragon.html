<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script>
        var ctx;
        var copies = 100;

        var x = [];
        var bgColor = 'black';
        var y = [];
        var w = 1200;
        var h = 1200;
        //var xx = yy = w / 2;
        //var x22 = y22 = h / 2;
        var color = [];
        var point = [];
        var drama = 10;
        for (i = 0; i < drama; i++) {
            point[i] = {
                angle: Math.PI * 2 * Math.random(),
                get x() {
                    return Math.cos(this.angle)
                },
                get y() {
                    return Math.sin(this.angle)
                },
                ix: Math.random()*w,
                iy:Math.random()*h,
                aSpeed: Math.random()*0.5,
                triggerTime: Math.random() * 1000 + 300,
                timer: 0,
                color: [],
                lines: 10,
                dd: 20,
                copies: [],
                line: [],
                size:[],
                initiate() {

                    for (ii = 0; ii < this.lines; ii++) {
                        this.line[ii] = {
                            px: [],
                            py: [],
                        };
                        this.size[ii]=Math.random()*50;
                        this.copies[ii]=Math.round(Math.random()*20)+30;
                        
                        for (j = 0; j < this.copies[ii]; j++) {
                            var seed = Math.round(Math.random() * 3);
                            switch (seed) {
                                case 1:
                                    var r = Math.random()* 128 + 128;
                                    var b = 0;
                                    var g = Math.random() * 128 + 128;
                                    break;
                                case 2:
                                    var r = Math.random()* 128 + 128;//Math.sin(Math.PI * 2 / this.copies[ii] * j) * 128 + 128;
                                    var b = r;//Math.random()* 128 + 128;//Math.cos(Math.PI * 2 / this.copies[ii] * j) * 128 + 128;
                                    var g = 0;
                                    break;
                                // case 2:
                                //     var r =Math.random()* 128 + 128;// Math.cos(Math.PI * 2 / this.copies[ii] * j) * 128 + 128;
                                //     var b = 0;
                                //     var g =Math.random()* 128 + 128;// Math.sin(Math.PI * 2 / this.copies[ii] * j) * 128 + 128;
                                //     break;
                                default:
                                    var r = 0;
                                    var b = Math.random()* 128 + 128;//Math.cos(Math.PI * 2 / this.copies[ii] * j) * 128 + 128;
                                    var g = Math.random()* 128 + 128;//Math.sin(Math.PI * 2 / this.copies[ii] * j) * 128 + 128;
                                    break;
                            }
                            this.color[ii] = "rgb(" + Math.round(r) + "," + Math.round(g) + "," + Math.round(b) +
                                ")";

                            this.line[ii].px[j] = this.ix + ii * 2;
                            this.line[ii].py[j] = this.iy + ii * 2
                        }
                    }
                },
                tracer() {
                    trace(this)
                }

            }
        }
        window.onload = function () {
            canvas = document.createElement("canvas");
            canvas.height = w;
            canvas.width = h;
            document.body.appendChild(canvas);
            ctx = canvas.getContext("2d");
            ctx.fillStyle = bgColor;
           // ctx.fillRect(0, 0, w, h);
            for (i = 0; i < drama; i++) {
                point[i].initiate();
            }
            animate();
        }

        function animate() {
            clear();
            draw();
            window.requestAnimationFrame(animate)
        }

        function draw() {

            for (j = 0; j < drama; j++) {
                point[j].tracer()
            }
        }

        function trace(obj) {
            ctx.lineWidth=0.8;
            if (obj.timer >= obj.triggerTime) {
                obj.angle = Math.PI * 2 * Math.random();
                obj.timer = 0;
                obj.triggerTime = Math.random() * 100 + 1000;
                //obj.aSpeed = Math.random();
                 //obj.dd=Math.random()*7;
            }
            obj.ix += obj.x;
            obj.iy += obj.y;
            if (obj.ix >= w || obj.ix <= 0) {
                obj.angle += Math.PI
            };
            if (obj.iy >= h || obj.iy <= 0) {
                obj.angle += Math.PI
            };
            obj.timer++;
            obj.angle += Math.PI / 180 * obj.aSpeed;
            // ctx.beginPath();
            // // ctx.fillStyle='white';
            // ctx.arc(obj.ix, obj.iy, 5, 0, Math.PI * 2);
            // ctx.closePath();
            // ctx.fill();
            var dist = [];
            for (jj = 0; jj < obj.lines; jj++) {
                ctx.strokeStyle = obj.color[jj];
                for (i = 0; i < obj.copies[jj]; i++) {

                    
                    if (i == 0) {
                        dist[i] = fDist(obj.ix, obj.iy, obj.line[jj].px[i], obj.line[jj].py[i]);
                        var angle = fAngle(obj.line[jj].px[i], obj.line[jj].py[i], obj.ix, obj.iy)
                        obj.line[jj].px[0] = Math.cos(obj.angle+Math.PI/2)*(jj-obj.lines/2)*obj.size[jj]+obj.ix;
                        obj.line[jj].py[0] = Math.sin(obj.angle+Math.PI/2)*(jj-obj.lines/2)*obj.size[jj]+obj.iy;
                        
                    } else {
                        ctx.beginPath();
                        ctx.moveTo(obj.line[jj].px[i-1], obj.line[jj].py[i-1]);
                        dist[i] = fDist(obj.line[jj].px[i-1],obj.line[jj].py[i-1], obj.line[jj].px[i], obj.line[jj].py[i]);
                        var angle = fAngle(obj.line[jj].px[i], obj.line[jj].py[i], obj.line[jj].px[i-1], obj.line[jj].py[i-1])
                        if (dist[i] > obj.dd) {
                        obj.line[jj].px[i] += Math.cos(angle);
                        obj.line[jj].py[i] += Math.sin(angle);
                        
                    }
                    ctx.lineTo(obj.line[jj].px[i], obj.line[jj].py[i]);
                        ctx.stroke();
                    }
                  
                    // ctx.beginPath();
                    // ctx.arc(obj.line[jj].px[i], obj.line[jj].py[i], 3, 0, Math.PI * 2);
                    // ctx.closePath();
                    // ctx.fill();
                    
                }
            }

        }

        function fAngle(x1, y1, x2, y2) {
            var angle = Math.atan2(y2 - y1, x2 - x1);
            return angle
        }

        function fDist(x1, y1, x2, y2) {
            var d = Math.sqrt((y2 - y1) * (y2 - y1) + (x2 - x1) * (x2 - x1));
            return d
        }

        function clear() {
            //  ctx.fillStyle='white';
             //ctx.clearRect(0, 0, w, h)
        }
    </script>
</head>

<body>

</body>

</html>