<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        * {
            padding: 0px;
            margin: 0px
        }
    </style>
    <script>
        var ctx, w, h;
        var time = 0;
        var image;
        var sx = 10;
        var w = 128;
        var h = 128;
        var steps = 12;
        steps = 256 / steps;
        //var data=[];
        var mas = [];

        window.onload = function () {
            canvas = document.createElement("canvas");
            //document.body.appendChild(canvas);
            ctx = canvas.getContext("2d");

            canvas.width = w;
            canvas.height = h;


            canvas = document.createElement("canvas");
            document.body.appendChild(canvas);
            ctx2 = canvas.getContext("2d");
            canvas.width = w * sx;
            canvas.height = h * sx;



            image = new Image();
            image.src = 'images/Iam.JPG';
            image.addEventListener("load", function () {
                draw()
            }, false);
            //animate();
        }

        function clearFrame() {
            ctx.clearRect(0, 0, w, h);

        }

        var t = ".,-+=*7$/&Ж%";
        
        //alert(tagList) //  ["Лето", "зима", "осень 2009 года"]

        function draw() {

            ctx.drawImage(image, 0, 0, w, h);
            var data = ctx.getImageData(0, 0, w, h);
            var idata = data.data;
            var j = 0;
            ctx2.font='900 Arial';
            for (i = 0; i < w; i++) {
                mas[i] = [];
                for (j = 0; j < w; j++) {
                    var index = j * w * 4 + i * 4;
                    var avC = Math.round((idata[index] + idata[index + 1] + idata[index + 2]) / 3);
                    var c = Math.round((255 - avC) / steps);
                    
                   // ctx2.fillRect(i * sx, j * sx, c, c);
                   ctx2.fillText(t[c], i * sx, j * sx, c, c);

                }

            }
            /*for(i=0;idata.length;i+=4){
                mas[j]=idata[i]
                j++}
            // console.log(i);
                /*
                var c=Math.round((idata[i]+idata[i+1]+idata[i+2])/3);
                var rgb="rgb("+c+","+c+","+c+","+255+")";
                var x=i%w*sx;
                var y=Math.floor(i/w)*sx;
                ctx2.fillStyle=rgb;
                ctx2.fillRect(x,y,sx,sx);*/
            //}*
        }



        function animate() {
            // clearFrame();
            draw();
            //  window.requestAnimationFrame(animate);
            time++
        }
    </script>
</head>
<script src="javascripts/three.js"></script>





<body>
    <script>

    </script>

</body>

</html>