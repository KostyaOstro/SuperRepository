<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script>
        var canvas, ctx, gsc;
        var time = 0;
        var w = h = 1024;
        var bg;
        var txtcolor;
        var hname=[
            "MARIE",
            "ANN",
            "HELEN",
            "NATALY",
            "VICKY"
            ];
        window.onload = function () {
            gsc = rSeed(5);
            bg=rColor(gsc);
            txtcolor=rColor(gsc);
            canvas = document.createElement("canvas");
            canvas.height = h;
            canvas.width = w;
            document.body.appendChild(canvas);
            ctx = canvas.getContext("2d");
            hair.init();
           
            animate();

        }

        var hair = {
            name:hname[rSeed(hname.length-1)],
            r: w / 6,
            points: rSeed(50) + 10,
            copies: 70,
            particles: 24,
            length: [],
            px: [],
            py: [],
            x: [],
            y: [],
            vx: 1,
            vy: -1,
            as: [],
            a: random(0, 1),
            a0: random(0, Math.PI * 2),
            lw: 20,
            color: [],
            pangle: [],
            psize:[],
            pspeed:[],
            init() {
                ctx.lineCap = "round";
                for (let j = 0; j < this.copies; j++) {
                    this.x[j] = [];
                    this.y[j] = [];

                    this.x[j][0] = Math.cos(Math.PI * 2 / this.copies * j) * this.r * 0.7 + w / 2;
                    this.y[j][0] = Math.sin(Math.PI * 2 / this.copies * j) * this.r + w / 2;
                    var r = 0;
                    var g = Math.floor(random(64, 255));
                    var b = Math.floor(random(64, 255));
                    this.color[j] = rColor(gsc); //"rgb(" + r + "," + g + "," + b + ")";
                    this.length[j] = [];
                    this.as[j] = [];
                    this.a[j] = [];
                    // this.a[j][i]=random(0.2,rSeed(3)+1)
                    //this.a0[j]=random(0.2,rSeed(3)+1)

                    for (let i = 1; i < this.points; i++) {

                        this.length[j][i] = random(5, 20);
                        this.as[j][i] = random(3, 20)

                    }

                }
            },
            draw() {
                ctx.fillStyle=bg;
                ctx.fillRect(0, 0, w, h);
               
                for (let j = 0; j < this.copies; j++) {

                    // this.length[j] = 5 * Math.cos(j) + 6;

                    ctx.strokeStyle = this.color[j];
                    for (let i = 1; i < this.points; i++) {
                        var x0 = this.x[j][i - 1];
                        var y0 = this.y[j][i - 1];
                        var angle = (1 - this.a) * this.a0 + this.a * ((Math.PI * 2) / this.copies * j) + Math.cos(
                            time / this.as[j][i])

                        this.x[j][i] = this.x[j][i - 1] + Math.cos(angle) * this.length[j][i];
                        this.y[j][i] = this.y[j][i - 1] + Math.sin(angle) * this.length[j][i];
                        ctx.beginPath();
                        ctx.moveTo(
                            this.x[j][i - 1],
                            this.y[j][i - 1]
                        );
                        ctx.lineTo(
                            this.x[j][i],
                            this.y[j][i]
                        )

                        ctx.lineWidth = (1 - i / this.points) * this.lw + 0.2;
                        ctx.stroke()

                    }


                }
                ctx.beginPath();
                for (let j = 0; j < this.copies; j++) {
                    if (j == 0) {
                        ctx.moveTo(
                            this.x[j][0],
                            this.y[j][0]
                        )
                    } else {
                        ctx.lineTo(
                            this.x[j][0],
                            this.y[j][0]
                        )
                    }
                };
               // ctx.fillStyle = "white";
                ctx.fill()
                for (let i = 1; i < this.particles; i++) {

                    if (time == 0) {
                        var index1 = rSeed(0, this.copies - 1);
                        var index2 = rSeed(0, this.points);
                        this.px[i] =random(0,w);
                        this.py[i] = random(0,h);
                        this.pangle[i] = this.a0;
                        this.pspeed[i]=random(1,5);
                        this.psize[i]=random(2,16);
                    } else {
                        if(this.px[i]>w)this.px[i]-=w;
                        if(this.px[i]<0)this.px[i]+=w;
                        if(this.py[i]>h)this.py[i]-=h;
                        if(this.py[i]<0)this.py[i]+=h;
                        this.px[i] += Math.cos(this.pangle[i])* this.pspeed[i];
                        this.py[i] += Math.sin(this.pangle[i])* this.pspeed[i];
                        ctx.lineWidth =5;
                        ctx.strokeRect(
                            this.px[i] ,
                            this.py[i] ,
                            this.psize[i],
                            this.psize[i],

                        )
                    }
                }
                ctx.lineWidth =1;
                var fs=h/20;
                var lh=1;
                ctx.font='bold '+fs+'px arial';
                 ctx.textAlign="center";
                 ctx.fillStyle=txtcolor;
                for(let i=0;i<this.name.length;i++){
                    if(i%2==0){
                        var txt= this.name[i]+"  —"
                    }else{
                        var txt="—  "+this.name[i]
                    }
                    ctx.fillText(
                        txt,
                        w/2,
                        h/2+(i+1)*fs*lh-this.name.length/2*fs*lh
                    )
                }
            }
        }

        function animate() {
            hair.draw();
            requestAnimationFrame(animate);
            time++
        }

        function rColor(s) {
            var seed = Math.round(Math.random() * 4);
            var color = [];
            color[0] = ["#571845", "#900c3e", "#c70039", "#ff5733", "#ffc300"];
            color[1] = ["#96ceb4", "#ffeead", "#ff6f69", "#ffcc5c", "#88d8b0"];
            color[2] = ["#173f5f", "#20639b", "#3caea3", "#f6d55c", "#ed553b"];
            color[3] = ["#999", "#777", "#555", "#333", "#111"];
            color[4] = ["#ffa239", "#c8e6c9", "#81c784", "#4caf50", "#ffe789"];
            color[5] = ["#428", "#6ca2ea", "#b5d33d", "#fed23f", "#eb7d5b"];
            var rgb = color[s][seed];
            return rgb;
        };

        function random(minR, maxR) {
            var r = minR + (maxR - minR) * Math.random();
            return r
        };

        function rSeed(value) {
            var seed = Math.round(Math.random() * value);
            return seed
        };
    </script>
</head>

<body>

</body>

</html>