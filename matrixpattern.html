<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<script>
    var canvas, ctx;
    var w = h = 200;
    var time = 0;
    var gsc;
    var bgColor;
    var textColor = [];
    var mcanvas = [];
    var mctx = [];
    var scale = 8;
    var units = 100;
    var bw = bh = units * scale * 3;
    window.onload = function () {

        gsc = rSeed(5);
        bgColor = rColor(gsc);
        canvas = document.createElement("canvas");
        canvas.width = bw;
        canvas.height = bh;
        document.body.appendChild(canvas);
        ctx = canvas.getContext("2d");

        // scanvas = document.createElement("canvas");
        // scanvas.width = w;
        // scanvas.height = h;
        // document.body.appendChild(scanvas);
        // sctx = scanvas.getContext("2d");

        for (let i = 0; i < m.length; i++) {
            mcanvas[i] = document.createElement("canvas");
            mcanvas[i].width = 3 * scale;
            mcanvas[i].height = 3 * scale;
            //document.body.appendChild(mcanvas[i]);
            mctx[i] = mcanvas[i].getContext("2d");
            mctx[i].fillStyle ='white';
            mctx[i].fillRect(0, 0, 3 * scale, 3 * scale);
            mctx[i].fillStyle =bgColor;
            for (let ii = 0; ii < 9; ii++) {
                if (m[i][ii] == 1) {
                    mctx[i].fillRect(
                        ii % 3 * scale,
                        Math.floor(ii / 3) * scale,
                        scale,
                        scale)
                }
            }
        }

        //sourceCanvasAnimation.init();
        sourceCanvasAnimation.init();
        sourceCanvasAnimation.draw();
        //ddanimate();

    }
    var sourceCanvasAnimation = {
        figures: 20,
        x: [],
        y: [],
        size: [],
        type: [],
        vx: [],
        vy: [],
        init() {
            for (let i = 0; i < this.figures; i++) {
                this.x[i] = random(0, bw);
                this.y[i] = random(0,bh);
                this.vx[i] = random(-1, 1);
                this.vy[i] = random(-1, 1);
                this.size[i] = random(bw / 40, bw / 2);
              

            }
            for (let i = 0; i < units * units; i++) {
                if (i % (rSeed(5) + 1) == 0) {
                    ctx.drawImage(
                        mcanvas[rSeed(mcanvas.length - 1)],
                        i % units * scale * 3,
                        Math.floor(i / units) * scale * 3
                    )
                }
                if (i % (rSeed(5) + 1) == 0) {
                    ctx.fillRect(
                        i % units * scale * 3,
                        Math.floor(i / units) * scale * 3,
                        scale * (rSeed(5) + 1),
                        scale * (rSeed(5) + 1)
                    )
                }

            }
        },
        draw() {
            
            for (let j = 0; j < this.figures; j++) {
                this.x[j] += this.vx[j];
                this.y[j] += this.vy[j];
                if (this.x[j] > bw || this.x[j] < 0) {
                    this.vx[j] *= -1;
                }
                if (this.y[j] > bw || this.y[j] < 0) {
                    this.vy[j] *= -1;
                }
                //ctx.beginPath();
                ctx.fillStyle=rColor(gsc);
                ctx.globalCompositeOperation='difference';
                ctx.fillRect(
                    this.x[j],
                    this.y[j],
                    this.size[j],
                    this.size[j],
                   
                )  

               
                //ctx.fill();
                //ctx.fillStyle='black';
                ctx.fillRect(
                    this.x[j],
                    this.y[j],
                    10,
                    10
                );
                ctx.strokeStyle='white';
                ctx.font='20px arial';
                // ctx.fillText(
                //     this.x[j],
                //     this.x[j],
                //     this.y[j],
                // )
            }

        }
    }




    function draw() {
        sourceCanvasAnimation.draw()


    }

    function animate() {
        clear();
        draw();
        window.requestAnimationFrame(animate);
        time++
    }

    function clear() {
        
        ctx.clearRect(0, 0, bw, bh);

    }

    function rColor(s) {
        var seed = Math.round(Math.random() * 4);
        var color = [];
        color[0] = ["#571845", "#900c3e", "#c70039", "#ff5733", "#ffc300"];
        color[1] = ["#96ceb4", "#ffeead", "#ff6f69", "#ffcc5c", "#88d8b0"];
        color[2] = ["#173f5f", "#20639b", "#3caea3", "#f6d55c", "#ed553b"];
        color[3] = ["#999", "#777", "#555", "#333", "#111"];
        var rgb = color[s][seed];
        return rgb;
    }

    function random(minR, maxR) {
        var r = minR + (maxR - minR) * Math.random();
        return r
    }

    function rSeed(value) {
        var seed = Math.round(Math.random() * value);
        return seed
    }

    function dist(x1, y1, x2, y2) {
        var dx = Math.abs(x1 - x2);
        var dy = Math.abs(y1 - y2);
        var d = Math.sqrt(dx * dx + dy * dy);
        return d
    }


    function rColor(s) {
        var seed = Math.round(Math.random() * 4);
        var color = [];
        color[0] = ["#571845", "#900c3e", "#c70039", "#ff5733", "#ffc300"];
        color[1] = ["#96ceb4", "#ffeead", "#ff6f69", "#ffcc5c", "#88d8b0"];
        color[2] = ["#173f5f", "#20639b", "#3caea3", "#f6d55c", "#ed553b"];
        color[3] = ["#999", "#777", "#555", "#333", "#111"];
        color[4] = ["#ffa239", "#c8e6c9", "#81c784", "#4caf50", "#ffe789"];
        color[5] = ["#428", "#6ca2ea", "#b5d33d", "#fed23f", "#eb7d5b"];
        var rgb = color[s][seed];
        return rgb;
    }
    var m = [];
    m[0] = [
        1, 1, 1,
        1, 1, 1,
        1, 1, 1
    ];
    m[1] = [
        1, 1, 1,
        1, 0, 1,
        1, 1, 1
    ];
    m[2] = [
        1, 1, 1,
        0, 1, 0,
        1, 1, 1
    ];
    m[3] = [
        1, 1, 1,
        0, 0, 0,
        1, 1, 1
    ];
    m[4] = [
        1, 0, 1,
        1, 0, 1,
        1, 0, 1
    ];
    m[5] = [
        1, 0, 1,
        0, 1, 0,
        1, 0, 1
    ];
    m[6] = [
        0, 1, 0,
        1, 0, 1,
        0, 1, 0
    ];
    m[7] = [
        1, 0, 1,
        0, 0, 0,
        1, 0, 1
    ];
    m[8] = [
        1, 0, 0,
        0, 1, 0,
        0, 0, 1
    ];
    m[9] = [
        0, 0, 1,
        0, 1, 0,
        1, 0, 0
    ];
    m[10] = [
        0, 0, 0,
        0, 1, 0,
        0, 0, 0
    ];
</script>

<body>

</body>

</html>