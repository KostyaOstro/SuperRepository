<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<script>
    var ctx;
    var w = 400;
    var h = 800;
    var triCopies=50;
    var triangles=[];
    var time=0;
    window.onload = function () {
        var canvas = document.createElement('canvas');
        canvas.width = w;
        canvas.height = h;
        document.body.appendChild(canvas);
        ctx = canvas.getContext("2d");
        for (i = 0; i < triCopies; i++) {
            var Itri={
                x: Math.sin(i/triCopies*Math.PI)*w,
                y:  Math.sin(i/triCopies*Math.PI)*h,
                side:Math.random()*w/6,
                color:rColor(),
                type:Math.round(Math.random() * 4),
                speed:Math.random()*0.5,
                construct(){
                    triangleDraw(this)
                }
            }
            triangles.push(Itri)
        }
        animate();
    }

    function draw() {
        //console.log(time);
        for (i = 0; i < triCopies; i++) {
           // triangles[i].x+=triangles[i].speed;
            triangles[i].side=Math.sin(time/50+i/20)*w/5;
            triangles[i].construct();
        }
    }

    function triangleDraw(obj) {
        ctx.beginPath();
        var x=obj.x;
        var y=obj.y;
        var side=obj.side;
        
        switch (obj.type) {
            case 1: //left down
                ctx.moveTo(x, y);
                ctx.lineTo(x + side, y + side);
                ctx.lineTo(x, y + side);
                break;
            case 2: //left top
                ctx.moveTo(x, y);
                ctx.lineTo(x + side, y);
                ctx.lineTo(x, y + side);
                break;
            case 3: //right top
                ctx.moveTo(x, y);
                ctx.lineTo(x + side, y);
                ctx.lineTo(x+side, y + side);
                break;
            default://right bottom
                ctx.moveTo(x+side, y);
                ctx.lineTo(x + side, y+side);
                ctx.lineTo(x, y + side);
                break;
        }
        ctx.closePath();
        ctx.fillStyle=obj.color;
        ctx.fill()
    }

    function animate() {
        clear();
        draw();
        window.requestAnimationFrame(animate);
        time++
    }

    function clear() {
        ctx.clearRect(0, 0, w, h)
    }
    function rColor() {
            var seed = Math.round(Math.random() * 6);
            switch (seed) {
                case 1:
                    var r = Math.round(Math.random() * 128) + 128;
                    var g = Math.round(Math.random() * 128) + 128;
                    var b = 0;
                    break;
                case 2:
                    var r = 0; // Math.round(Math.abs(Math.sin(Math.random()) * 128)) + 128;
                    var g = Math.round(Math.random() * 128) + 128;
                    var b = Math.round(Math.random() * 128) + 128;
                default:
                    var r = Math.round(Math.random() * 128) + 128;
                    var g = 0; //Math.round(Math.abs(Math.sin(Math.random()) * 128)) + 128;
                    var b = Math.round(Math.random() * 128) + 128;
                    break;
            }
            var rgb = "rgba(" + r + "," + g + "," + b + ",0.7)";
            return rgb;
        }
</script>

<body>

</body>

</html>