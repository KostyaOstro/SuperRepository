<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        #blockText {
            width: 250px;
            height: 250px;
            font-size: 50px;
            font-weight: bold;
            font-family: Arial;
        }
    </style>
    <script>
        var sourceCanvas, canvas, sourceCanvas2;
        var sctx, ctx, sctx2;
        var rows = Math.pow(2,rSeed(6));
        var w = 1024;
        var h = w / rows;
        var globalSeedColor;
        window.onload = function () {
            globalSeedColor = rSeed(5);


            sourceCanvas = document.createElement("canvas");
            sourceCanvas.height = h;
            sourceCanvas.width = w;
            //document.body.appendChild(sourceCanvas);
            sctx = sourceCanvas.getContext("2d");

            sourceCanvas2 = document.createElement("canvas");
            sourceCanvas2.height = h;
            sourceCanvas2.width = w;
            //document.body.appendChild(sourceCanvas2);
            sctx2 = sourceCanvas2.getContext("2d");

            canvas = document.createElement("canvas");
            canvas.height = w;
            canvas.width = w;
            document.body.appendChild(canvas);
            ctx = canvas.getContext("2d");

            sctx.lineWidth = 1+rSeed(5);
            sctx.fillStyle = rColor(globalSeedColor);
            sctx.fillRect(0, 0, w, h);
            for (let i = 0; i < 200; i++) {
                let x = random(0, w);
                let y = random(0, h);
                let r = random(0, w / 40)+ random(0, w / 20);

                var gco = [
                    "screen",
                    "lighter",
                    "multiply",
                    "overlay",
                    "darken",
                    "lighten"
                ]


                sctx.globalCompositeOperation = gco[rSeed(5)];



                sctx.strokeStyle = rColor(globalSeedColor);
                if (rSeed(2) > 1) {
                    sctx.strokeRect(
                        x - r / 2,
                        y - r / 2,
                        r,
                        r
                    )
                } else {
                    sctx.beginPath()
                    sctx.arc(
                        x,
                        y,
                        r / 2,
                        0,
                        Math.PI * 2
                    )
                    sctx.closePath();
                    sctx.stroke()
                }
            }
            ctx.save();

            // if (rSeed(2) > 1) {
                sctx2.translate(0, h);
                sctx2.scale(1, -1);
            // } else {
            //     sctx2.translate(w, 0);
            //     sctx2.scale(-1, 1);
            // }
            sctx2.drawImage(sourceCanvas, 0, 0)

            ctx.translate(0, -h);
            for (let j = 0; j < rows; j++) {
                ctx.translate(0, h);
                if (j%2==0) {
                    ctx.drawImage(
                        sourceCanvas,
                        0,
                        0)
                } else {
                    ctx.drawImage(
                        sourceCanvas2,
                        0,
                        0)

                }
            };
            ctx.restore();

            ctx.globalCompositeOperation = gco[rSeed(5)];
            var grd = ctx.createLinearGradient(0, 0, w, w);
            grd.addColorStop(0, rColor(globalSeedColor));
            grd.addColorStop(1, rColor(globalSeedColor));
            ctx.fillStyle = grd;
            ctx.fillRect(0, 0, w, w)
        }

        function random(minR, maxR) {
            var r = minR + (maxR - minR) * Math.random();
            return r
        }

        function rSeed(value) {
            var seed = Math.round(Math.random() * value);
            return seed
        }

        function rColor(s) {
            var seed = Math.round(Math.random() * 4);
            var color = [];
            color[0] = ["#571845", "#900c3e", "#c70039", "#ff5733", "#ffc300"];
            color[1] = ["#96ceb4", "#ffeead", "#ff6f69", "#ffcc5c", "#88d8b0"];
            color[2] = ["#173f5f", "#20639b", "#3caea3", "#f6d55c", "#ed553b"];
            color[3] = ["#999", "#777", "#555", "#333", "#111"];
            color[4] = ["#ffa239", "#c8e6c9", "#81c784", "#4caf50", "#ffe789"];
            color[5] = ["#428", "#6ca2ea", "#b5d33d", "#fed23f", "#eb7d5b"];
            var rgb = color[s][seed];
            return rgb;
        }
    </script>
</head>

<body>

</body>

</html>